<!DOCTYPE html>
<html lang="en"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --accent-color: #FF4D4D;
            --font-size: 1.1rem;
        }
    </style>

    
    
    
    
    
    

    
    <title>Puppet Writeup</title>
    <meta name="description" content="Welcome back! This will be a series of three posts on the Uniswap challenges from Damn Vulnerable DeFi. I&rsquo;ve just finished Puppet V3 and learned a lot on …">
    <meta name="keywords" content=''>

    <meta property="og:url" content="http://localhost:1313/posts/puppet-witeup/puppet-writeup/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Puppet Writeup">
    <meta property="og:description" content="Welcome back! This will be a series of three posts on the Uniswap challenges from Damn Vulnerable DeFi. I&rsquo;ve just finished Puppet V3 and learned a lot on …">
    <meta property="og:image" content="http://localhost:1313/">
    <meta property="og:image:secure_url" content="http://localhost:1313/">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Puppet Writeup">
    <meta name="twitter:description" content="Welcome back! This will be a series of three posts on the Uniswap challenges from Damn Vulnerable DeFi. I&rsquo;ve just finished Puppet V3 and learned a lot on …">
    <meta property="twitter:domain" content="http://localhost:1313/posts/puppet-witeup/puppet-writeup/">
    <meta property="twitter:url" content="http://localhost:1313/posts/puppet-witeup/puppet-writeup/">
    <meta name="twitter:image" content="http://localhost:1313/">

    
    <link rel="canonical" href="http://localhost:1313/posts/puppet-witeup/puppet-writeup/">

    
    <link rel="stylesheet" type="text/css" href="/css/normalize.min.css" media="print">

    
    <link rel="stylesheet" type="text/css" href="/css/main.min.css">

    
    <link id="dark-theme" rel="stylesheet" href="/css/dark.min.css">

    
    <script src="/js/bundle.min.70293498aa96b2dbb767ec11a622eb2266d8fc37a0fff88233a82952e3c72b15.js" integrity="sha256-cCk0mKqWstu3Z&#43;wRpiLrImbY/Deg//iCM6gpUuPHKxU="></script>

    
    
        <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      }
    };
    </script>
    <script id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
  
    
</head>
<body>
        <script>
            
            setThemeByUserPref();
        </script><header class="header">
    <nav class="header-nav">

        

        <div class="nav-title">
            <a class="nav-brand" href="http://localhost:1313/">Complexity</a>
        </div>

        <div class="nav-links">
            
            <div class="nav-link">
                <a href="http://localhost:1313/posts/" aria-label="" > Posts </a>
            </div>
            
            <div class="nav-link">
                <a href="https://x.com/devrar98" aria-label="twitter" target="_blank"><span data-feather='twitter'></span>  </a>
            </div>
            
            <div class="nav-link">
                <a href="https://github.com/Devrar" aria-label="github" target="_blank"><span data-feather='github'></span>  </a>
            </div>
            
            <div class="nav-link">
                <a href="https://lichess.org/@/Devrar" aria-label="lichess" target="_blank"><img class='svg-inject' src='/svg/icons/lichess.svg' />  </a>
            </div>
            

            <span class="nav-icons-divider"></span>
            <div class="nav-link dark-theme-toggle">
                <span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
                <a aria-hidden="true" role="switch">
                    <span class="theme-toggle-icon" data-feather="moon"></span>
                </a>
            </div>

            <div class="nav-link" id="hamburger-menu-toggle">
                <span class="sr-only hamburger-menu-toggle-screen-reader-target">menu</span>
                <a aria-checked="false" aria-labelledby="hamburger-menu-toggle" id="hamburger-menu-toggle-target" role="switch">
                    <span data-feather="menu"></span>
                </a>
            </div>

            
            <ul class="nav-hamburger-list visibility-hidden">
                
                <li class="nav-item">
                    <a href="http://localhost:1313/posts/" > Posts </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://x.com/devrar98" target="_blank"><span data-feather='twitter'></span>  </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://github.com/Devrar" target="_blank"><span data-feather='github'></span>  </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://lichess.org/@/Devrar" target="_blank"><img class='svg-inject' src='/svg/icons/lichess.svg' />  </a>
                </li>
                
                <li class="nav-item dark-theme-toggle">
                    <span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
                    <a role="switch">
                        <span class="theme-toggle-icon" data-feather="moon"></span>
                    </a>
                </li>
            </ul>

        </div>
    </nav>
</header>
<main id="content">
    <div class="post container">
    <div class="post-header-section">
        <h1>Puppet Writeup</h1>

        

        
	
	
	
	
        

	

	

	
          <small role="doc-subtitle"></small>
	

	
          <p class="post-date">
              

              September 25, 2025

              
          </p>
	

        <ul class="post-tags">
          
        </ul>
    </div>

    <div class="post-content">
        <p>Welcome back! This will be a series of three posts on the Uniswap challenges from <a href="https://www.damnvulnerabledefi.xyz/">Damn Vulnerable DeFi</a>. I&rsquo;ve just finished <a href="https://www.damnvulnerabledefi.xyz/challenges/puppet-v3/">Puppet V3</a> and learned a lot on the protocol, so I thought it would be nice to write down what I&rsquo;ve understood and see if I can explain it in a clear way.</p>
<blockquote>
<p>&ldquo;You do not really understand something unless you can explain it to your grandmother.&rdquo;</p>
<p><em>— Albert Einstein</em></p></blockquote>
<details class="spoiler">
  <summary>Spoiler</summary>
  No, Einstein didn&rsquo;t really say that.
</details>
<h2 id="what-is-uniswap">What is Uniswap?</h2>
<blockquote>
<p>In 2018, Hayden Adams created the Uniswap Protocol, a decentralized protocol that introduced a new way to exchange value online. By using Automated Market Makers (AMMs), the protocol enabled peer-to-peer trading of digital assets without the need for intermediaries or any central authority.</p></blockquote>
<p>This or similar is what I found when I searched for an explanation of the protocol. But knowing almost nothing about decentralized finance I had no idea what it meant.</p>
<p>The meaning is actually simple: Uniswap (in its first version, which will be the focus of this post) allows to create exchanges between any ERC20 token and ETH. And what about the Automated Market Makers? That just means all the exchanges are managed by smart contracts and fully automated (you don&rsquo;t say!) whereas other solutions reckon on order books, which I don&rsquo;t really know how they work, but I imagine something like:</p>
<ul>
<li>Alice: &ldquo;Hey! I&rsquo;m selling 1 token for 3 ETH, anybody wants??&rdquo;</li>
<li>Bob: &ldquo;But that&rsquo;s a scam, I&rsquo;m willing to pay at maximum 2 ETH!&rdquo;</li>
<li>Charlie: &ldquo;Hey Bob, I&rsquo;m selling for 2 ETH!&rdquo;</li>
<li><em>Bob and Charlie exchange and are happy, Alice is sad.</em></li>
</ul>
<p><strong>Achtung!</strong> This <em>might</em> be an oversemplification of the actual protocol.</p>
<h2 id="how-it-works">How it works?</h2>
<p>It is pretty clear why the order book solution works, but how does an automated solution work? How does it determine the right price? How does it change? Where does the liquidity come from? The solution to all these questions lies in the magic Uniswap curve $x \cdot y = k$. Except for the liquidity part, that&rsquo;s just people giving tokens and ETH to the pool to earn on fees, not so magical. But let&rsquo;s focus on the curve.</p>
<p>Let&rsquo;s take as example an exchange between DVT (Damn Valuable Token, from the Damn Vulnerable DeFi challenges) and ETH. The exchange pool has reserves of both DVT and ETH: when a user wants to exchange DVT for ETH it sends DVT to the pool and the pool sends back ETH. But how much ETH? That&rsquo;s where the curve comes into play.</p>
<p>Calling $x$ the amount of DVT in the pool and $y$ the amount of ETH, the exchange works on the invariant $k = x\cdot y$. This means that if we want to exchange $\Delta x$ DVT, we will get $\Delta y$ ETH such that $(x + \Delta x)(y - \Delta y) = k$ (not taking fees into account). Visualizing it on the curve it would be something like this:</p>

        
    </div>

    <div class="prev-next">
        
    </div>

    
    
    
</div>



    

        </main><footer class="footer">
    
    

    

    

    

    <span>
        Made with &#10084;&#65039; using <a target="_blank" href="https://github.com/gokarna-theme/gokarna-hugo">Gokarna</a>
    </span>
</footer>
</body>
</html>
